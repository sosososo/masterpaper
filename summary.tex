
\chapter{总结与展望}

本章首先对本文工作进行总结，介绍本文工作内容以及创新性，接着提出本文研究的不足和可以改进的地方，对未来的研究工作进行展望。

\section{本文工作总结}

在缺陷检测中，传统的方法对特征选择要求严格，算法容易受各种条件影响，深度学习算法对数据量要求较大，时间复杂度高，并且对小物体检测效果不理想，
而零件的缺陷检测则具有缺陷数量较少、体积较小的特点，直接使用传统算法和深度学习算法都不能得到较好结果。

本文针对这一问题，提供了一种获取零件表面法线信息的算法，该算法使用不同方向光源下拍摄得到的零件图片作为输入，基于光线的反射原理计算零件表面法线。为了获取不同方向光源下的零件照片，我们设计了一套硬件设备，该设备包括遮光模块、平台模块、灯光模块、拍照模块和控制模块五大模块，这些模块将相机、步进电机、LED灯带、滑轨、偏光镜和滤光膜等不同硬件组合成一个整体，从而可以捕获不同方向光源下的零件照片。
同时，在计算表面法线之前，本文首先对相机进行了校正，这些校正包括白平衡校正、色彩校正、畸变校正，
接着对方向光源产生的损失进行了光线补偿，该补偿算法预存储了一套补偿数据，并利用预存储的补偿数据对新的照片进行光线补偿，这些校正和补偿算法极大地改善了设备本身存在的问题，提高了零件法线的精度。
可以从实验结果看到，我们提取出来的法线结果非常精细，较好的还原了物体本身法线。
并且值得一提的是，这一法线提取算法不仅可以用来获取零件法线，也可以用来获取其他物体的法线。

接着本文将法线图作为缺陷检测的输入，验证了其可行性和有效性。在将法线图应用的传统的检测方法时，我们首先对数据做了预处理，根据零件本身特点对图片做展开和截取，从而获得了零件主表面，有效去除了图片背景信息。
接着针对零件缺陷检测中缺陷数据规模小的问题，我们进行了数据增强，使用滑动窗口、旋转、仿射变换等方式扩充了数据规模。
在图像特征提取阶段，我们分别提
取了 Haar-like 特征、图像梯度特征、LBP 特征、GLCM 特征、HOG 特征等
不同的图像特征，用于后续分类，并分析了不同特征的分类效果，根据分
类效果对特征进行组合，从而得到一组最适合这一问题的特征组合。
在分类器分类阶段，我们通过
随机抽样的方法将数据集划分为不同的子集，划分后的每个子数据集中的
样本是均衡的，对于每个数据集，我们选择支持向量机作为基础分类器，
训练多个不同的基础分类器，然后利用 Adaboost 的方法将其组合成一个强
分类器，最终，每个子数据集都可以得到一个强分类器，我们将这些强分
类器利用级联的方式做检测。这种分类器的设计方法不仅能够有效解决数据不平衡的问题，而且可以提高算法的性能和泛化能力。
除此之外，我们还直接使用零件照片训练了传统分类器，分析了它的结果，并将其结果与本文方法的结果进行了对比，这一对比证明了本文方法的有效性。

最后，本文还将法线图作为深度学习模型的输入，训练了一个基于深度学习的目标检测模型。
在使用深度学习模型时，我们同样对数据做了一定的预处理和增强，去除了背景的影响，增加了数据量。
在模型设计阶段，我们针对本文问题对模型进行了修改和优化。
首先，我们调整了模型最后的分类层，改写了损失函数。其次我们向模型中加入了Batch Normalization，
加快了模型收敛速度，
并且可以有效防止过拟合。
最后我们将数据集划分为不同的子数据集，训练了多个模型，
并用级联的方式将这些模型组合成级联检测器，
在解决了数据不平衡问题的同时，提高了模型的效果。
我们将深度学习模型的检测结果与传统检测方法的检测结果进行对比，分析
了二者各自的优缺点及原因。


\section{未来工作展望}

本文虽然取得了一定进展，但是仍有很多可以改进的地方。

首先在零件的法线提取工作中，由于零件本身存在一定厚度，在方向光源照射时会产生阴影。本文并没有考虑阴影对结果的影响，这导致零件法线中部分边缘区域的结果并不理想，因此，这是一个需要继续优化的地方。

其次是在基于传统的缺陷检测算法中，因为数据规模的限制，本文将零件缺陷检测作为一个二分类问题，数据被分为有缺陷和没有缺陷两类。但是在实际的生产环境中，缺陷被分为裂纹、起皮、拉线、划痕、凹坑、凸起、斑点、腐蚀等多类，因此，在获得更多数据之后，我们可以将二分类问题扩展到多分类中去，得到一个更加完善的检测模型。

最后在深度学习算法中，目前已有很多端到端的目标检测算法，比如YOLO、SSD等，但是考虑到这些模型的复杂度和我们目前拥有的数据规模，我们并没尝试这些算法，而是在分类模型的基础上，利用滑动窗口选择候选区域做分类的方法来达到目标检测和定位的效果，我们计划在接下来的工作中
继续扩充数据库，并使用端到端的方法进行目标检测。